<!DOCTYPE html>






  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="基于MySQL5.7 本篇包含以下知识点：  MySQL体系结构 存储引擎 数据类型 表操作 数据操作">
<meta name="keywords" content="数据库,MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL完全笔记">
<meta property="og:url" content="https://github.com/serchaofan/serchaofan.github.io/2018/04/30/MySQL学习笔记-1/index.html">
<meta property="og:site_name" content="tdLaogu的小站">
<meta property="og:description" content="基于MySQL5.7 本篇包含以下知识点：  MySQL体系结构 存储引擎 数据类型 表操作 数据操作">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://github.com/2018/04/30/MySQL学习笔记-1/mysql.jpg">
<meta property="og:updated_time" content="2018-05-22T12:17:24.403Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL完全笔记">
<meta name="twitter:description" content="基于MySQL5.7 本篇包含以下知识点：  MySQL体系结构 存储引擎 数据类型 表操作 数据操作">
<meta name="twitter:image" content="https://github.com/2018/04/30/MySQL学习笔记-1/mysql.jpg">






  <link rel="canonical" href="https://github.com/serchaofan/serchaofan.github.io/2018/04/30/MySQL学习笔记-1/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>MySQL完全笔记 | tdLaogu的小站</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tdLaogu的小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">24</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">17</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/serchaofan/serchaofan.github.io/2018/04/30/MySQL学习笔记-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tdLaogu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tdLaogu的小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySQL完全笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-04-30 09:10:31" itemprop="dateCreated datePublished" datetime="2018-04-30T09:10:31+08:00">2018-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-22 20:17:24" itemprop="dateModified" datetime="2018-05-22T20:17:24+08:00">2018-05-22</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>基于MySQL5.7</strong></p>
<p>本篇包含以下知识点：</p>
<ul>
<li><a href="#MySQL体系">MySQL体系结构</a></li>
<li><a href="#存储引擎">存储引擎</a></li>
<li><a href="#数据类型">数据类型</a></li>
<li><a href="#表操作">表操作</a></li>
<li><a href="#数据操作">数据操作</a><a id="more"></a></li>
<li><a href="#索引">索引</a></li>
<li><a href="#视图">视图</a></li>
<li><a href="#存储过程">存储过程</a></li>
<li><a href="#游标">游标</a></li>
<li><a href="#触发器">触发器</a></li>
<li><a href="#事务">事务</a></li>
<li><a href="#安全">安全</a></li>
<li><a href="#日志">日志</a></li>
<li><a href="#权限管理">权限管理</a></li>
<li><a href="#维护">维护</a></li>
<li><a href="#性能优化">性能优化</a></li>
</ul>
<img src="/2018/04/30/MySQL学习笔记-1/mysql.jpg" title="mysql">
<h3 id="MySQL体系"><a href="#MySQL体系" class="headerlink" title="MySQL体系"></a>MySQL体系</h3><p>MySQL采用C/S体系，因此在使用时，是运行两个程序：</p>
<ul>
<li>mysqld：MySQL服务器程序，运行在数据库服务器上，负责监听并处理请求</li>
<li>mysql-client：运行在客户端上，负责连接到数据库服务器并发出指令。</li>
</ul>
<h3 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h3><p>MySQL具有<strong>可替换存储引擎构架</strong>的特征。MySQL功能分为两部分：</p>
<ul>
<li>外层部分：完成与客户端的连接，调查SQL语句的内容</li>
<li>内层部分：即存储引擎部分，负责接收外层的数据操作指令，完成实际的数据输入输出及文件操作。<br>MySQL支持多种存储引擎，可通过<code>show engines;</code>查看mysql支持的存储引擎，MySQL共支持9种存储引擎，其中最主要的两个引擎为MyISAM和InnoDB，默认引擎为InnoDB。</li>
</ul>
<p>MyISAM与InnoDB的区别：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>MyISAM</th>
<th>InnoDB</th>
</tr>
</thead>
<tbody>
<tr>
<td>存储限制</td>
<td>有</td>
<td>64TB</td>
</tr>
<tr>
<td>事务安全</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>锁机制</td>
<td>表锁</td>
<td>行锁</td>
</tr>
<tr>
<td>B树索引</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>哈希索引</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>集群索引</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据缓存</td>
<td></td>
<td>支持</td>
</tr>
<tr>
<td>索引缓存</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据可压缩</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>空间使用</td>
<td>低</td>
<td>高</td>
</tr>
<tr>
<td>内存使用</td>
<td>低</td>
<td>高</td>
</tr>
<tr>
<td>批量插入速度</td>
<td>高</td>
<td>低</td>
</tr>
<tr>
<td>外键</td>
<td>不支持</td>
<td>支持</td>
</tr>
</tbody>
</table>
<ul>
<li>InnoDB只有表结构，数据全部存储在ibdata1文件中，算法复杂。</li>
<li>MyISAM将表，数据，索引全部单独存储。</li>
<li>MyISAM适合对事务完整型无要求并以访问为主的应用，访问速度快。</li>
<li>InnoDB适合频繁更新、删除操作，对事务要求高，需要实现并发控制的应用。</li>
</ul>
<p>可通过<code>show create table 表名</code>查询表中使用的存储引擎。<br>也可通过<code>alter table 表名 engine=引擎</code>更改表的存储引擎。</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul>
<li><p>整数</p>
<ul>
<li>tinyint：1字节</li>
<li>smallint：2字节</li>
<li>mediumint：3字节</li>
<li>int：4字节</li>
<li>bigint：8字节</li>
</ul>
<p>整数类型都分为有符号与无符号。默认有符号，可在类型前加上unsigned创建无符号类型。<br>插入数据只能插入整数，若字段设置了是整数类型，就算插入浮点数也会转换为整数。<br>零填充：zerofill，若数据位数不满设置位数值，则前面补充0，且若设置零填充，数据类型自动变为无符号类型。零填充意义：保持数据格式</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc my_int;</span><br><span class="line">+-------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field       | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-------------+--------------+------+-----+---------+-------+</span><br><span class="line">| tinyint_1   | tinyint(4)   | YES  |     | NULL    |       |</span><br><span class="line">| smallint_1  | smallint(6)  | YES  |     | NULL    |       |</span><br><span class="line">| mediumint_1 | mediumint(9) | YES  |     | NULL    |       |</span><br><span class="line">| int_1       | int(11)      | YES  |     | NULL    |       |</span><br><span class="line">| bigint_1    | bigint(20)   | YES  |     | NULL    |       |</span><br><span class="line">+-------------+--------------+------+-----+---------+-------+</span><br><span class="line"># 括号中的数值为显示位数（宽度），可修改，不会影响数据。</span><br><span class="line">mysql&gt; alter table my_int modify int_1 int zerofill;</span><br><span class="line"># zerofill 会在显示宽度不满时用0填满</span><br><span class="line">mysql&gt; select int_1 from my_int;</span><br><span class="line">+------------+</span><br><span class="line">| int_1      |</span><br><span class="line">+------------+</span><br><span class="line">| 0000000004 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure>
<ul>
<li><p>浮点数</p>
<ul>
<li>float：4字节，也可设置为float(M,D)</li>
<li>double：8字节</li>
<li>decimal(M,D)：定点数，M+2字节，取值范围与double一致，但有效范围由M与D决定，M为一共的位数，D为小数部分的位数。<br>小数部分超出没问题，会自动四舍五入，但整数部分不能超出。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create table my_float(</span><br><span class="line">	float_1 float(5,2),</span><br><span class="line">	double_1 double(5,2),</span><br><span class="line">	decimal_1 decimal(5,2)</span><br><span class="line">);</span><br><span class="line">mysql&gt; insert into my_float values(1.115,1.115,1.115);</span><br><span class="line"># 整数部分不能超出规定长度，但小数部分可以，小数的超出部分会四舍五入。</span><br><span class="line">mysql&gt; select * from my_float;</span><br><span class="line">+---------+----------+-----------+</span><br><span class="line">| float_1 | double_1 | decimal_1 |</span><br><span class="line">+---------+----------+-----------+</span><br><span class="line">|    1.12 |     1.12 |      1.12 |</span><br><span class="line">+---------+----------+-----------+</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>字符串</p>
<ul>
<li>char(length)：定长字符串，定义时指定长度，最大255字节。</li>
<li>varchar(length)：变长字符串，最大长度65536个字节，一般会自动多加一个字节。实际存储从第二个字节开始，接着要用1到2个字节表示实际长度（长度超过255时需要2个字节），因此最大长度不能超过65535。<br>varchar 会保留字符串末尾的空格，而 char 会删除。</li>
<li>text：存储文字的文本字符串</li>
<li>blob：存储二进制的文本字符串<br>若数据量非常大（超过255字节），可选用文本字符串。</li>
<li>枚举字符串：enum()，用于规定数据格式，节省空间（枚举实际存储的是数值）。</li>
<li>集合字符串：set()，集合存储的也是数值，且可以多选</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>存储数据</th>
<th>char(4)</th>
<th>varchar(4)</th>
<th>char占用字节</th>
<th>varchar占用字节</th>
</tr>
</thead>
<tbody>
<tr>
<td>abcd</td>
<td>abcd</td>
<td>abcd</td>
<td>4x3</td>
<td>4x3+1</td>
</tr>
<tr>
<td>abcde</td>
<td>错误</td>
<td>错误</td>
<td>超出长度</td>
<td>超出长度</td>
</tr>
</tbody>
</table>
<p>如何选择定长或变长字符串？</p>
<pre><code>* 定长字符串：磁盘空间浪费，但效率高，若数据确定长度一样，就选定长（如身份证，电话号）
* 变长字符串：磁盘空间节省，但效率低，若数据长度不确定，就选变长（如住址，姓名）
</code></pre><p>枚举字符串举例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table my_enum(sex enum(&apos;m&apos;,&apos;f&apos;));</span><br><span class="line">mysql&gt; insert into my_enum values(&apos;m&apos;);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"># 字段赋值必须填枚举中的字符串</span><br><span class="line">mysql&gt; insert into my_enum values(&apos;a&apos;);</span><br><span class="line">ERROR 1265 (01000): Data truncated for column &apos;sex&apos; at row 1</span><br></pre></td></tr></table></figure></p>
<p>在MySQL中，系统会自动转换数据类型。枚举中字符串是数值的证明如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sex+0,sex from my_enum \G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">sex+0: 1</span><br><span class="line">  sex: m</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">sex+0: 2</span><br><span class="line">  sex: f</span><br><span class="line"># 由此可知，枚举中字符串的数值是按照枚举顺序从1开始。</span><br><span class="line"># 于是也可以通过数值插入</span><br><span class="line">mysql&gt; insert into my_enum values(1),(2);</span><br><span class="line">Query OK, 2 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>枚举原理：枚举在进行数据规范（定义）的时候，系统会自动建立一个数字与枚举元素的对应关系（存放在日志），然后在进行数据插入时，系统自动将字符转换成对应的数字存储，在进行数据提取时，系统自动将数值转换成对应字符串显示。</p>
</blockquote>
<p>集合字符串举例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table my_set(lang set(&apos;c&apos;,&apos;c++&apos;,&apos;python&apos;,&apos;java&apos;));</span><br><span class="line"># 与枚举类似，集合也可通过数值进行赋值</span><br></pre></td></tr></table></figure></p>
<ul>
<li>日期和时间<ul>
<li>date：4字节，1001年到9999年的日期</li>
<li>datetime：8字节，1001年到9999年的日期，并能保存时间</li>
<li>timestamp：4字节，1970年1月1日到现在的秒数，最大到2038年</li>
<li>time：3字节</li>
<li>year：1字节，最小值1901，最大值2155<br>MySQL提供函数<code>from_unixtime()</code>将unix时间戳转换为时间，<code>unix_timestamp()</code>将日期转换为unix时间戳。<br>默认情况下，如果插入时没有指定 TIMESTAMP 列的值，会将这个值设置为当前时间。应该尽量使用 TIMESTAMP，因为它比 DATETIME 空间效率更高。<br>datetime与时区无关，timestamp与时区有关。</li>
</ul>
</li>
</ul>
<p>记录长度：<br>任何一条记录的长度最长不能超过65535个字节，一条记录的最长字节数为65534，但可以人为填满。<br>MySQL中text文本字符串不占用记录长度：额外存储，但text字符串也属于记录的一部分，所以一定要占据记录中的部分长度（10字节，保存数据的地址与长度）</p>
<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><p>创建表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	字段1 数据类型,</span><br><span class="line">	字段2 数据类型,</span><br><span class="line">	......</span><br><span class="line">);</span><br><span class="line">也可直接create table 数据库名.表名(); # 这样不需要先进入库，直接建表。</span><br></pre></td></tr></table></figure></p>
<p>表创建后，数据库文件下会生成对应表的结构文件.frm（与存储引擎有关）。</p>
<p>查看创建语句<br><code>show create table 表名;</code><br>查看表结构<br><code>desc/show 表名;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc user;</span><br><span class="line"></span><br><span class="line"># field：字段名</span><br><span class="line"># type：字段类型</span><br><span class="line"># null：（列属性）是否允许为空，null不是数据类型</span><br><span class="line"># key：索引：pri主键，uni唯一键</span><br><span class="line"># defalut：（列属性）默认值</span><br><span class="line"># extra：（列属性）扩充属性</span><br></pre></td></tr></table></figure>
<p>更改表名<br><code>rename table 表名 to 新表名;</code><br>更改表属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 表选项 参数</span><br><span class="line"></span><br><span class="line">表选项:</span><br><span class="line">add column 字段名 数据类型 [位置]; # 新增字段</span><br><span class="line">modify 字段名 数据类型 [属性] [位置]; # 修改字段</span><br><span class="line">change 旧字段 新字段 数据类型 [属性] [位置]; # 重命名字段</span><br><span class="line">drop 字段名; # 删除字段</span><br><span class="line">位置：first：第一个，after 字段：在字段后</span><br></pre></td></tr></table></figure></p>
<p>删除表<br><code>drop table 表名;</code> 若要删除多张表，用<code>,</code>分隔表名</p>
<p>表约束：保证数据的合法性</p>
<ul>
<li>空属性：NULL（默认），NOT NULL（不为空）<br>  要做到数据不为空，空就没有意义，空数据无法参与运算，所以定义字段时就要设置not null，若字段未指定该选项，当字段为空时，MySQL会用NULL填充，而NULL会占用一个字节，当指定了not null后，该字段必须有值，确保数据准确性。</li>
<li>列描述comment：无实际含义，描述字段</li>
<li>默认值default：可在字段设置时添加default ，在插入字段时不赋初值就会使用默认值</li>
<li><p>主键primary key：一张表只有一个字段可以使用对应键，用来唯一的约束该字段里的数据，不能重复，一张表最多只有一个主键，主键默认不为空（not null）。<br>  增加主键：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">法一：在创建字段时就添加primary key 关键字</span><br><span class="line">create table user(</span><br><span class="line">	id int primary key,</span><br><span class="line">	name varchar(20)</span><br><span class="line">);</span><br><span class="line">法二：在创建表时，在所有字段后使用primary key(字段名) 创建主键，如有多个字段作为主键，可以是复合主键</span><br><span class="line">create table user(</span><br><span class="line">	id int,</span><br><span class="line">	name varchar(20),</span><br><span class="line">	primary key(id,name)</span><br><span class="line">);</span><br><span class="line">mysql&gt; desc user1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | NO   | PRI | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">法三：追加主键</span><br><span class="line">alter table 表名 add primary key(字段); 或</span><br><span class="line">alter table 表名 modify 字段名 类型 primary key;</span><br><span class="line"># 前提：字段对应数据是独立的（不重复）</span><br></pre></td></tr></table></figure>
<p>  主键约束：主键字段数据不允许相同，若相同则数据操作失败<br>  主键删除：无法更新主键，只有删除了以后才能再添加<br>  <code>alter table 表名 drop primary key;</code></p>
<p>  分类</p>
<pre><code>逻辑主键：字段无业务含义（如id），一般以此类字段做主键
业务主键：字段存放业务数据
</code></pre></li>
<li><p>自增长auto-increment：若该字段未赋值或仅有默认值，会自动触发，会给字段值不断+1（当前字段中最大值），形成新字段，常与主键搭配。<br>  <strong>注：</strong> 字段做自增长的前提：本身是一个索引（key属性有值），字段值必须是整型数字。一张表最多只有一个字段自增长。<br>  修改自增长：修改的值必须比该字段当前最大值大(小的话不生效)<br>  <code>alter table 表 auto_increment = x;</code><br>  查看自增长变量<br>  <code>show variables like &#39;auto_increment%&#39;;</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;auto_increment%&apos;;</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| Variable_name            | Value |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| auto_increment_increment | 1     |</span><br><span class="line">| auto_increment_offset    | 1     |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">increment为自增长步数</span><br><span class="line">offset为自增长起始值</span><br><span class="line">修改：set auto_increment_increment = x;</span><br><span class="line"># 修改是对整个数据库，且仅是会话级</span><br><span class="line">alter table 表 modify即可修改</span><br></pre></td></tr></table></figure>
</li>
<li><p>唯一键unique key：数据不能重复，允许为空，也可多个为空，空字段不参与唯一键比较。</p>
</li>
</ul>
<h3 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h3><h4 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名 values(字段1,字段2,...),(字段1,字段2,...),...;	</span><br><span class="line"># 插入数据（直接插数据，字段要一一对应）</span><br><span class="line">insert into 表名 (字段1名,字段2名,...) values(字段1,字段2,字段3),...;	</span><br><span class="line"># 可指定插入字段，就不用对齐了</span><br></pre></td></tr></table></figure>
<p>若主键冲突，即主键对应的值已存在，插入就会失败。有以下两种解决方法。<br>法一：更新<br><code>insert into 表名(字段(要包含主键)) values() on duplicate key update 字段 = 值;</code><br>法二：替换<br><code>replace into 表名(字段(包含主键)) values();</code></p>
<p>蠕虫复制：将已有的数据进行新增，数据成倍增加<br>    用法1：从已有表创建新表（仅仅复制表结构）<br>    <code>create table 表名 like 库名.表名;</code><br>    例：<code>mysql&gt; create table user_worm like user;</code><br>    用法2：将查出的数据复制到一张表<br>    <code>insert into 表名(字段) select 字段 from 表名;</code><br>    例：<code>mysql&gt; insert into user_worm (id,name,sex,age) select id,name,sex,age from user;</code><br><strong>蠕虫复制的意义：</strong> 可以快速让表中数据膨胀到一定数量级以测试表的压力与效率</p>
<h4 id="数据更新"><a href="#数据更新" class="headerlink" title="数据更新"></a>数据更新</h4><p><code>update 表名 set 字段 = 值 [where] [limit 限制更新数量（前几行）];</code><br>例：</p>
<h4 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h4><p><code>delete from 表名 [where];</code><br><strong>数据删除不会改变表的结构，如自增长不会归零，只能删除表后再重建</strong><br><code>truncate 表名;</code> # 先删除该表后再创建该表</p>
<h4 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select [选项] 字段[别名] from 表名 [where][group by][having][order by][limit];</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line">all/* ：保留所有结果，默认（尽量不要打印所有）</span><br><span class="line">distinct：去重</span><br><span class="line">别名： 字段名 as 别名</span><br></pre></td></tr></table></figure>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3>
      
    </div>

    
      


    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库/" rel="tag"># 数据库</a>
          
            <a href="/tags/MySQL/" rel="tag"># MySQL</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/29/YAML学习笔记/" rel="next" title="YAML学习笔记">
                <i class="fa fa-chevron-left"></i> YAML学习笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/30/Leetcode题记-1/" rel="prev" title="Leetcode题集">
                Leetcode题集 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">tdLaogu</p>
              <p class="site-description motion-element" itemprop="description">已经是一条咸鱼了吧</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">24</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/serchaofan" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i></a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:624261309@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://geekchen.top/" title="SuperChen" target="_blank">SuperChen</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://geekfan.top/" title="Geekfan" target="_blank">Geekfan</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL体系"><span class="nav-number">1.</span> <span class="nav-text">MySQL体系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储引擎"><span class="nav-number">2.</span> <span class="nav-text">存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型"><span class="nav-number">3.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表操作"><span class="nav-number">4.</span> <span class="nav-text">表操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据操作"><span class="nav-number">5.</span> <span class="nav-text">数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据插入"><span class="nav-number">5.1.</span> <span class="nav-text">数据插入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据更新"><span class="nav-number">5.2.</span> <span class="nav-text">数据更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据删除"><span class="nav-number">5.3.</span> <span class="nav-text">数据删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据查询"><span class="nav-number">5.4.</span> <span class="nav-text">数据查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引"><span class="nav-number">6.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图"><span class="nav-number">7.</span> <span class="nav-text">视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储过程"><span class="nav-number">8.</span> <span class="nav-text">存储过程</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tdLaogu</span>

  

  
</div>











        








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.2.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.2.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.2.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
